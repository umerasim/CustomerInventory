{% extends "Master.html" %}


{% block head_section %}
  {{ super() }}
		
		<link href="static/css/xchartStyles.css" rel="stylesheet" />
		<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js" crossorigin="anonymous"></script>
  
{% endblock %}

{% block title %}Bank{% endblock %}


{% block menu %}

					<nav class="tm-main-nav">
                                <ul class="tm-main-nav-ul">
                                <li class="tm-nav-item">
                                    <a href="{{ url_for('bank') }}" class="tm-nav-item-link">Dashboard</a>
                                </li>
                                <li class="tm-nav-item">
                                    <a href="{{ url_for('bankCompanySearch') }}" class="tm-nav-item-link">Company Search</a>
                                </li>
                                <li class="tm-nav-item">
                                    <a href="{{ url_for('bankContactUs') }}" class="tm-nav-item-link">Contact Us</a>
                                </li>
                                <li class="tm-nav-item">
                                    <a href="{{ url_for('logout') }}" class="tm-nav-item-link">Log out</a>
                                </li>
                               
                            </ul>
                        </nav>

{% endblock %}


{% block page_title %} Bank Dashboard {% endblock %}



{% block content %}

 <table style="width:100%" border=1>
	  <tr>
	    <th style="text-align:center">Total Companies</th> 
	    <th style="text-align:center">Transactions Today</th>
	    <th style="text-align:center">Transactions Last 7 Days</th>
	    <th style="text-align:center">Transactions This Month</th>
	  </tr>
	  <tr>
	    <td style="text-align:center">{{states[0].val}}</td>
	    <td style="text-align:center">{{states[1].val}}</td>
	    <td style="text-align:center">{{states[2].val}}</td>
	    <td style="text-align:center">{{states[3].val}}</td>
	  </tr>
	</table>
	
	<br>
	<br>
	

                        <div class="row">
                            <div class="col-lg-6">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-chart-bar mr-1"></i>
                                        Todays Hourly Transactions
                                    </div>
                                    <div class="card-body"><canvas id="myBarChart" width="100%" height="50"></canvas></div>
                                    
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-chart-pie mr-1"></i>
                                        Top Transactions Company Last 7 days
                                    </div>
                                    <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                                        <thead>
                                            <tr>
                                                <th>Company</th>
												<th>Transactions</th>
                                                
                                                
                                            </tr>
                                        </thead>
                                        <tfoot>
                                            
                                        </tfoot>
                                        <tbody>
                                        
                                        {% for item in top5TransactinsCompany %}
                                            <tr>
                                                <td>{{item.company_name}}</td>
											    <td>{{item.num}}</td>
                                                
                                            </tr>
                                         {% endfor %}
                                                                                   
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                                </div>
                            </div>
							<div class="col-lg-6">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-chart-pie mr-1"></i>
                                        Last Five Search
                                    </div>
                                    <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                                        <thead>
                                            <tr>
                                                <th>Date</th>
												<th>Company</th>
                                                
                                                
                                            </tr>
                                        </thead>
                                        <tfoot>
                                            
                                        </tfoot>
                                        <tbody>
                                            <tr>
                                                <td>02/10/2020 12:30 AM</td>
											    <td>Lulu</td>
                                                
                                            </tr>
                                            <tr>
                                                <td>02/10/2020 12:30 AM</td>
											    <td>Nesto</td>
                                            </tr>
                                            <tr>
                                                <td>02/10/2020 12:30 AM</td>
											    <td>EMAX</td>
                                            </tr>
                                            <tr>
                                               <td>02/10/2020 12:30 AM</td>
											    <td>Super</td>
                                            </tr>
                                           <tr>
                                                <td>02/10/2020 12:30 AM</td>
											    <td>Gyper</td>
                                            </tr>
                                           
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                                </div>
                            </div>
							
							
                        </div>
                    
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
        <script src="static/js/chartScripts.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
        <script src="static/assets/demo/chart-area-demo.js"></script>
        <script src="static/assets/demo/chart-pie-demo.js"></script>
        
        <script>
        
        
        document.addEventListener('DOMContentLoaded', function() {
        	   
        	// Set new default font family and font color to mimic Bootstrap's default styling
               Chart.defaults.global.defaultFontFamily = '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif';
               Chart.defaults.global.defaultFontColor = '#292b2c';

               var barChatLables = {{ barChatLables|safe  }};
               var chartData = {{ chartData|safe  }};
           
               
               // Bar Chart Example
               var ctx = document.getElementById("myBarChart");
               var myLineChart = new Chart(ctx, {
                 type: 'bar',
                 data: {
                   labels: barChatLables,
                   datasets: [{
                     label: "Transactions",
                     backgroundColor: "rgba(2,117,216,1)",
                     borderColor: "rgba(2,117,216,1)",
                     data: chartData,
                   }],
                 },
                 options: {
                   scales: {
                     xAxes: [{
                       time: {
                         unit: 'Hours'
                       },
                       gridLines: {
                         display: false
                       },
                       ticks: {
                         maxTicksLimit: 20
                       }
                     }],
                     yAxes: [{
                       ticks: {
                         min: 0,
                         max: 5,
                         maxTicksLimit: 10
                       },
                       gridLines: {
                         display: true
                       }
                     }],
                   },
                   legend: {
                     display: false
                   }
                 }
               });


        
        
        }, false);
        

        </script>


{% endblock %}